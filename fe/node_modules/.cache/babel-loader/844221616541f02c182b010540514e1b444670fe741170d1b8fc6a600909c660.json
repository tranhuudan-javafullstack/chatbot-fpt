{"ast":null,"code":"import\"./ChatSideBar.scss\";import ChatSideBarItem from\"../chat_side_bar_item/ChatSideBarItem\";import{useState}from\"react\";import{createChatBot}from\"../../services/ChatBotService\";import{decryptToken}from\"../../utils/Functions\";import{addChat}from\"../../store/actions/ChatAction\";import{useDispatch,useSelector}from\"react-redux\";import{useNavigate}from\"react-router-dom\";import sidebar from\"../../assets/icons/sidebar.png\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function ChatSideBar(_ref){let{botId}=_ref;const[index,setIndex]=useState(-1);const[newChat,setNewChat]=useState(\"\");const accessToken=decryptToken(localStorage.getItem('access_token'));const dispatch=useDispatch();const navigate=useNavigate();const chatsBot=useSelector(state=>state.chatsBotReducer.chats);const chats=chatsBot?chatsBot.chats:[];const[showSideBar,setShowSideBar]=useState(true);const handleCreateNewChat=async()=>{try{const data=await createChatBot(newChat,accessToken,botId);dispatch(addChat(data));setNewChat(\"\");}catch(error){console.error('Error create bot:',error.message);}};const handleShowSideBar=()=>{setShowSideBar(!showSideBar);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{onClick:handleShowSideBar,className:\"btn_side_bar \".concat(showSideBar?\"\":\"btn_side_bar--transform\",\" \"),children:/*#__PURE__*/_jsx(\"img\",{src:sidebar,alt:\"\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"drawbar side_bar \".concat(showSideBar?\"\":\"side_bar--hidden\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"drawbar--padding\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"new_chat\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newChat,onChange:e=>setNewChat(e.target.value),className:\"new_chat__input\",placeholder:\"Nhập tên đoạn chat\"}),/*#__PURE__*/_jsx(\"div\",{onClick:handleCreateNewChat,className:\"btn_create_chat\",children:/*#__PURE__*/_jsx(\"span\",{children:\"T\\u1EA1o chat\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chat__wrapper\",children:chats.map((chatBot,i)=>{return/*#__PURE__*/_jsx(ChatSideBarItem,{title:chatBot.title,botId:botId,chatId:chatBot.chat_id,index:i,selectedIndex:index,handleSelected:setIndex},chatBot.chat_id);})}),/*#__PURE__*/_jsxs(\"div\",{onClick:()=>navigate(\"/\"),className:\"btn_return_home\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-arrow-left\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Trang ch\\u1EE7\"})]})]})})]});}","map":{"version":3,"names":["ChatSideBarItem","useState","createChatBot","decryptToken","addChat","useDispatch","useSelector","useNavigate","sidebar","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ChatSideBar","_ref","botId","index","setIndex","newChat","setNewChat","accessToken","localStorage","getItem","dispatch","navigate","chatsBot","state","chatsBotReducer","chats","showSideBar","setShowSideBar","handleCreateNewChat","data","error","console","message","handleShowSideBar","children","onClick","className","concat","src","alt","type","value","onChange","e","target","placeholder","map","chatBot","i","title","chatId","chat_id","selectedIndex","handleSelected"],"sources":["/Users/huudan/Development/chatbot.com/fe/src/components/chat_side_bar/ChatSideBar.js"],"sourcesContent":["import \"./ChatSideBar.scss\";\nimport ChatSideBarItem from \"../chat_side_bar_item/ChatSideBarItem\";\nimport {useState} from \"react\";\nimport {createChatBot} from \"../../services/ChatBotService\";\nimport {decryptToken} from \"../../utils/Functions\";\nimport {addChat} from \"../../store/actions/ChatAction\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {useNavigate} from \"react-router-dom\";\nimport sidebar from \"../../assets/icons/sidebar.png\";\n\nexport default function ChatSideBar({botId}) {\n    const [index, setIndex] = useState(-1);\n    const [newChat, setNewChat] = useState(\"\");\n    const accessToken = decryptToken(localStorage.getItem('access_token'));\n    const dispatch = useDispatch();\n    const navigate = useNavigate();\n    const chatsBot = useSelector((state) => state.chatsBotReducer.chats);\n    const chats = chatsBot ? chatsBot.chats :[];\n    const [showSideBar, setShowSideBar] = useState(true);\n    const handleCreateNewChat = async () =>{\n        try {\n            const data = await createChatBot(newChat,accessToken, botId);\n            dispatch(addChat(data));\n            setNewChat(\"\");\n        } catch (error) {\n            console.error('Error create bot:', error.message);\n        }\n    }\n    const handleShowSideBar = () => {\n        setShowSideBar(!showSideBar);\n    }\n    return (\n        <>\n            <div onClick={handleShowSideBar} className={`btn_side_bar ${showSideBar ? \"\" :\"btn_side_bar--transform\"} `}>\n                <img src={sidebar} alt=\"\"/>\n            </div>\n            <div className={`drawbar side_bar ${showSideBar ? \"\" : \"side_bar--hidden\"}`}>\n                <div className=\"drawbar--padding\">\n                    <div className=\"new_chat\">\n                        <input type=\"text\" value={newChat} onChange={(e)=>setNewChat(e.target.value)} className={\"new_chat__input\"} placeholder={\"Nhập tên đoạn chat\"}/>\n                        <div onClick={handleCreateNewChat} className=\"btn_create_chat\"><span>Tạo chat</span></div>\n                    </div>\n                    <div className=\"chat__wrapper\">\n                        {chats.map((chatBot, i)=>{\n                            return <ChatSideBarItem key={chatBot.chat_id} title={chatBot.title} botId={botId} chatId={chatBot.chat_id} index={i} selectedIndex={index} handleSelected={setIndex}/>\n                        })}\n                    </div>\n                    <div onClick={()=>navigate(\"/\")} className=\"btn_return_home\">\n                        <i className=\"bi bi-arrow-left\"></i>\n                        <span>Trang chủ</span>\n                    </div>\n                </div>\n\n            </div>\n        </>\n\n    )\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}