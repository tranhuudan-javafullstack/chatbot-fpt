{"ast":null,"code":"import ChatArea from\"../chat_area/ChatArea\";import DocumentViewer from\"../document_viewer/DocumentViewer\";import{useParams}from\"react-router-dom\";import{useEffect,useState}from\"react\";import{useDispatch}from\"react-redux\";import{decryptToken}from\"../../utils/Functions\";import Loading from\"../loading/Loading\";import{getChatsInBot}from\"../../services/ChatBotService\";import{actionSaveCurrentChatInBot}from\"../../store/actions/ChatAction\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ChatWindow(){const{botId,chatId}=useParams();const[isLoading,setIsLoading]=useState(true);const dispatch=useDispatch();const accessToken=decryptToken(localStorage.getItem('access_token'));// const myknowledges = useSelector((state) => state.knowledgeReducer.knowledges);\nconst[chats,setChats]=useState([]);const[isLoadChat,setIsLoadchat]=useState(false);const[showContext,setShowContext]=useState(true);useEffect(()=>{// fetchData();\nfetchChatInBot();},[chatId,accessToken]);const fetchData=async()=>{try{const data=await getChatsInBot(accessToken,botId,chatId);dispatch(actionSaveCurrentChatInBot(data));setIsLoading(false);}catch(error){console.error('Error fetching chat:',error.message);}};const fetchChatInBot=async()=>{try{const data=await getChatsInBot(accessToken,botId,chatId);// console.log(\"DATA CHAT IN BOT\", data.queries);\nsetChats(data.queries);setIsLoading(false);// setIsLoading(false);\n}catch(error){console.error('Error fetching chat:',error.message);}};return/*#__PURE__*/_jsx(_Fragment,{children:isLoading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ChatArea,{chats:chats,fetChats:fetchChatInBot,showContext:showContext}),/*#__PURE__*/_jsx(DocumentViewer,{chats:chats,showContext:showContext,setShowContext:setShowContext})]})});}","map":{"version":3,"names":["ChatArea","DocumentViewer","useParams","useEffect","useState","useDispatch","decryptToken","Loading","getChatsInBot","actionSaveCurrentChatInBot","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ChatWindow","botId","chatId","isLoading","setIsLoading","dispatch","accessToken","localStorage","getItem","chats","setChats","isLoadChat","setIsLoadchat","showContext","setShowContext","fetchChatInBot","fetchData","data","error","console","message","queries","children","fetChats"],"sources":["/Users/huudan/Development/chatbot.com/fe/src/components/chat_window/ChatWindow.js"],"sourcesContent":["import ChatArea from \"../chat_area/ChatArea\";\nimport DocumentViewer from \"../document_viewer/DocumentViewer\";\nimport {useParams} from \"react-router-dom\";\nimport {useEffect, useState} from \"react\";\nimport {useDispatch} from \"react-redux\";\nimport {decryptToken} from \"../../utils/Functions\";\nimport Loading from \"../loading/Loading\";\nimport {getChatsInBot} from \"../../services/ChatBotService\";\nimport {actionSaveCurrentChatInBot} from \"../../store/actions/ChatAction\";\n\nexport default function ChatWindow() {\n    const { botId, chatId } = useParams();\n    const [isLoading, setIsLoading] = useState(true);\n    const dispatch = useDispatch();\n    const accessToken = decryptToken(localStorage.getItem('access_token'));\n    // const myknowledges = useSelector((state) => state.knowledgeReducer.knowledges);\n    const [chats, setChats] = useState([]);\n    const [isLoadChat, setIsLoadchat] = useState(false)\n    const [showContext, setShowContext] = useState(true);\n    useEffect(() => {\n        // fetchData();\n        fetchChatInBot();\n    }, [chatId,accessToken]);\n    const fetchData = async () => {\n        try {\n            const data = await getChatsInBot(accessToken, botId, chatId);\n            dispatch(actionSaveCurrentChatInBot(data));\n            setIsLoading(false);\n        } catch (error) {\n            console.error('Error fetching chat:', error.message);\n        }\n    };\n    const fetchChatInBot = async () => {\n        try {\n            const data = await getChatsInBot(accessToken, botId, chatId);\n            // console.log(\"DATA CHAT IN BOT\", data.queries);\n            setChats(data.queries);\n            setIsLoading(false);\n            // setIsLoading(false);\n        } catch (error) {\n            console.error('Error fetching chat:', error.message);\n        }\n    };\n    return (\n        <>\n            {isLoading? <Loading/> : <>\n                <ChatArea chats={chats} fetChats={fetchChatInBot} showContext={showContext}/>\n                <DocumentViewer chats={chats} showContext={showContext} setShowContext={setShowContext}/>\n            </>}\n\n        </>\n    )\n}"],"mappings":"AAAA,MAAO,CAAAA,QAAQ,KAAM,uBAAuB,CAC5C,MAAO,CAAAC,cAAc,KAAM,mCAAmC,CAC9D,OAAQC,SAAS,KAAO,kBAAkB,CAC1C,OAAQC,SAAS,CAAEC,QAAQ,KAAO,OAAO,CACzC,OAAQC,WAAW,KAAO,aAAa,CACvC,OAAQC,YAAY,KAAO,uBAAuB,CAClD,MAAO,CAAAC,OAAO,KAAM,oBAAoB,CACxC,OAAQC,aAAa,KAAO,+BAA+B,CAC3D,OAAQC,0BAA0B,KAAO,gCAAgC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1E,cAAe,SAAS,CAAAC,UAAUA,CAAA,CAAG,CACjC,KAAM,CAAEC,KAAK,CAAEC,MAAO,CAAC,CAAGhB,SAAS,CAAC,CAAC,CACrC,KAAM,CAACiB,SAAS,CAAEC,YAAY,CAAC,CAAGhB,QAAQ,CAAC,IAAI,CAAC,CAChD,KAAM,CAAAiB,QAAQ,CAAGhB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAiB,WAAW,CAAGhB,YAAY,CAACiB,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,CAAC,CACtE;AACA,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGtB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACuB,UAAU,CAAEC,aAAa,CAAC,CAAGxB,QAAQ,CAAC,KAAK,CAAC,CACnD,KAAM,CAACyB,WAAW,CAAEC,cAAc,CAAC,CAAG1B,QAAQ,CAAC,IAAI,CAAC,CACpDD,SAAS,CAAC,IAAM,CACZ;AACA4B,cAAc,CAAC,CAAC,CACpB,CAAC,CAAE,CAACb,MAAM,CAACI,WAAW,CAAC,CAAC,CACxB,KAAM,CAAAU,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC1B,GAAI,CACA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAzB,aAAa,CAACc,WAAW,CAAEL,KAAK,CAAEC,MAAM,CAAC,CAC5DG,QAAQ,CAACZ,0BAA0B,CAACwB,IAAI,CAAC,CAAC,CAC1Cb,YAAY,CAAC,KAAK,CAAC,CACvB,CAAE,MAAOc,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAACE,OAAO,CAAC,CACxD,CACJ,CAAC,CACD,KAAM,CAAAL,cAAc,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACA,KAAM,CAAAE,IAAI,CAAG,KAAM,CAAAzB,aAAa,CAACc,WAAW,CAAEL,KAAK,CAAEC,MAAM,CAAC,CAC5D;AACAQ,QAAQ,CAACO,IAAI,CAACI,OAAO,CAAC,CACtBjB,YAAY,CAAC,KAAK,CAAC,CACnB;AACJ,CAAE,MAAOc,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAACE,OAAO,CAAC,CACxD,CACJ,CAAC,CACD,mBACIzB,IAAA,CAAAE,SAAA,EAAAyB,QAAA,CACKnB,SAAS,cAAER,IAAA,CAACJ,OAAO,GAAC,CAAC,cAAGQ,KAAA,CAAAF,SAAA,EAAAyB,QAAA,eACrB3B,IAAA,CAACX,QAAQ,EAACyB,KAAK,CAAEA,KAAM,CAACc,QAAQ,CAAER,cAAe,CAACF,WAAW,CAAEA,WAAY,CAAC,CAAC,cAC7ElB,IAAA,CAACV,cAAc,EAACwB,KAAK,CAAEA,KAAM,CAACI,WAAW,CAAEA,WAAY,CAACC,cAAc,CAAEA,cAAe,CAAC,CAAC,EAC3F,CAAC,CAEL,CAAC,CAEX","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}