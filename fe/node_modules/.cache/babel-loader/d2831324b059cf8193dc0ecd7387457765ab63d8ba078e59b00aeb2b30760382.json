{"ast":null,"code":"import botsIcon from\"../../assets/images/bot.png\";import\"./Bot.scss\";import BotItem from\"../bot_item/BotItem\";import{useEffect,useState}from\"react\";import BotModal from\"../bot_modal/BotModal\";import{getBots}from\"../../services/UserService\";import{useDispatch,useSelector}from\"react-redux\";import{actionDeleteBot,actionUpdateBot,addBot,saveBots}from\"../../store/actions/BotsAction\";import Loading from\"../loading/Loading\";import{createBot,deleteBot,updateBot}from\"../../services/BotsService\";import{decryptToken}from\"../../utils/Functions\";import NotificationDialog from\"../notification_dialog/NotificationDialog\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Bot(){const[editBotModal,setEditBotModal]=useState(false);const[titleBot,setTitleBot]=useState(\"\");const[descriptionBot,setDescriptionBot]=useState(\"\");const[botIdEdit,setBotIdEdit]=useState(\"\");const accessToken=decryptToken(localStorage.getItem('access_token'));const bots=useSelector(state=>state.botReducer.bots);// const [bots, setBots] = useState([]);\nconst[isLoading,setIsLoading]=useState(true);const dispatch=useDispatch();const[showDialog,setShowDialog]=useState(false);const[deleteId,setDeleteId]=useState(\"\");useEffect(()=>{fetchData();},[accessToken]);const fetchData=async()=>{try{const data=await getBots(accessToken);// setBots(data.bots);\ndispatch(saveBots(data.bots));setIsLoading(false);}catch(error){console.error('Error fetching bots:',error.message);}};const toggleShowDialog=function(){let botId=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"\";setDeleteId(botId);setShowDialog(!showDialog);};const toggleEditBotModel=function(){let titleBot=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"\";let descriptionBot=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"\";let botId=arguments.length>2&&arguments[2]!==undefined?arguments[2]:\"\";setTitleBot(titleBot);setDescriptionBot(descriptionBot);setBotIdEdit(botId);setEditBotModal(!editBotModal);};const confirm=async(titleBot,descriptionBot,botId)=>{try{if(botId){const data=await updateBot(botId,titleBot,descriptionBot,accessToken);dispatch(actionUpdateBot(data));}else{const data=await createBot(titleBot,descriptionBot,accessToken);dispatch(addBot(data));}toggleEditBotModel();}catch(error){console.error('Error create bot:',error.message);}};const handleDelete=async botId=>{try{const data=await deleteBot(botId,accessToken);dispatch(actionDeleteBot(botId));toggleShowDialog();}catch(error){console.error('Error create bot:',error.message);}};return/*#__PURE__*/_jsx(_Fragment,{children:isLoading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsxs(\"div\",{className:\"bot_page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bot_page__header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bot_page__title\",children:[/*#__PURE__*/_jsx(\"img\",{src:botsIcon,alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{className:\"title\",children:\"Bots\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bot_page__btn\",children:/*#__PURE__*/_jsx(\"div\",{onClick:()=>toggleEditBotModel(),className:\"btn_create_bot\",children:/*#__PURE__*/_jsx(\"p\",{className:\"btn_create_bot--text\",children:\"T\\u1EA1o bot\"})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bot_page__body\",children:bots.map((bot,index)=>{return/*#__PURE__*/_jsx(BotItem,{handleDelete:()=>toggleShowDialog(bot.bot_id),botId:bot.bot_id,title:bot.name,description:bot.description,createAt:bot.created_at,toggleEditBot:toggleEditBotModel},bot.bot_id);})}),showDialog&&/*#__PURE__*/_jsx(NotificationDialog,{confirm:()=>handleDelete(deleteId),title:\"Xác nhận để xóa bot\",mesage:\"Bạn chắc chắn muốn xóa bot này?\",cancelDialog:toggleShowDialog}),editBotModal&&/*#__PURE__*/_jsx(BotModal,{botId:botIdEdit,confirm:confirm,title:titleBot,description:descriptionBot,toggleCreateBotModel:toggleEditBotModel})]})});}","map":{"version":3,"names":["botsIcon","BotItem","useEffect","useState","BotModal","getBots","useDispatch","useSelector","actionDeleteBot","actionUpdateBot","addBot","saveBots","Loading","createBot","deleteBot","updateBot","decryptToken","NotificationDialog","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Bot","editBotModal","setEditBotModal","titleBot","setTitleBot","descriptionBot","setDescriptionBot","botIdEdit","setBotIdEdit","accessToken","localStorage","getItem","bots","state","botReducer","isLoading","setIsLoading","dispatch","showDialog","setShowDialog","deleteId","setDeleteId","fetchData","data","error","console","message","toggleShowDialog","botId","arguments","length","undefined","toggleEditBotModel","confirm","handleDelete","children","className","src","alt","onClick","map","bot","index","bot_id","title","name","description","createAt","created_at","toggleEditBot","mesage","cancelDialog","toggleCreateBotModel"],"sources":["/Users/huudan/Development/chatbot.com/fe/src/components/bot/Bot.js"],"sourcesContent":["import botsIcon from \"../../assets/images/bot.png\"\nimport \"./Bot.scss\"\nimport BotItem from \"../bot_item/BotItem\";\nimport {useEffect, useState} from \"react\";\nimport BotModal from \"../bot_modal/BotModal\";\nimport {getBots} from \"../../services/UserService\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {actionDeleteBot, actionUpdateBot, addBot, saveBots} from \"../../store/actions/BotsAction\";\nimport Loading from \"../loading/Loading\";\nimport {createBot, deleteBot, updateBot} from \"../../services/BotsService\";\nimport {decryptToken} from \"../../utils/Functions\";\nimport NotificationDialog from \"../notification_dialog/NotificationDialog\";\n\nexport default function Bot() {\n    const [editBotModal, setEditBotModal] = useState(false);\n    const [titleBot, setTitleBot] = useState(\"\");\n    const [descriptionBot, setDescriptionBot] = useState(\"\");\n    const [botIdEdit, setBotIdEdit] = useState(\"\");\n    const accessToken = decryptToken(localStorage.getItem('access_token'));\n    const bots = useSelector((state) => state.botReducer.bots);\n    // const [bots, setBots] = useState([]);\n    const [isLoading, setIsLoading] = useState(true);\n    const dispatch = useDispatch();\n    const [showDialog, setShowDialog] = useState(false);\n    const [deleteId, setDeleteId] = useState(\"\");\n    useEffect(() => {\n        fetchData();\n    }, [accessToken]);\n    const fetchData = async () => {\n        try {\n            const data = await getBots(accessToken);\n            // setBots(data.bots);\n            dispatch(saveBots(data.bots));\n            setIsLoading(false);\n        } catch (error) {\n            console.error('Error fetching bots:', error.message);\n        }\n    };\n    const toggleShowDialog = (botId = \"\") => {\n        setDeleteId(botId);\n        setShowDialog(!showDialog);\n    }\n    const toggleEditBotModel = (titleBot=\"\", descriptionBot=\"\", botId = \"\") => {\n        setTitleBot(titleBot);\n        setDescriptionBot(descriptionBot);\n        setBotIdEdit(botId);\n        setEditBotModal(!editBotModal);\n    }\n    const confirm = async (titleBot, descriptionBot, botId) => {\n        try {\n            if(botId){\n                const data = await updateBot(botId,titleBot, descriptionBot, accessToken);\n                dispatch(actionUpdateBot(data));\n            }else{\n                const data = await createBot(titleBot, descriptionBot,accessToken);\n                dispatch(addBot(data));\n            }\n            toggleEditBotModel();\n        } catch (error) {\n            console.error('Error create bot:', error.message);\n        }\n    }\n    const handleDelete = async (botId) => {\n        try {\n            const data = await deleteBot(botId, accessToken);\n            dispatch(actionDeleteBot(botId));\n            toggleShowDialog();\n        } catch (error) {\n            console.error('Error create bot:', error.message);\n        }\n    }\n    return (\n        <>\n            {isLoading ? <Loading/> : <div className={\"bot_page\"}>\n                <div className=\"bot_page__header\">\n                    <div className=\"bot_page__title\">\n                        <img src={botsIcon} alt=\"\"/><p className={\"title\"}>Bots</p>\n                    </div>\n                    <div className=\"bot_page__btn\">\n                        <div onClick={()=>toggleEditBotModel()} className={\"btn_create_bot\"}>\n                            <p className={\"btn_create_bot--text\"}>Tạo bot</p>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"bot_page__body\">\n                    {bots.map((bot, index)=>{\n                        return <BotItem key={bot.bot_id} handleDelete={()=>toggleShowDialog(bot.bot_id)} botId={bot.bot_id} title={bot.name} description={bot.description} createAt={bot.created_at} toggleEditBot={toggleEditBotModel}/>\n                    })}\n                </div>\n                {showDialog && <NotificationDialog confirm={()=> handleDelete(deleteId)} title={\"Xác nhận để xóa bot\"} mesage={\"Bạn chắc chắn muốn xóa bot này?\"}\n                                                   cancelDialog={toggleShowDialog}/>}\n                {editBotModal && <BotModal botId={botIdEdit} confirm={confirm} title={titleBot} description={descriptionBot} toggleCreateBotModel={toggleEditBotModel}/>}\n            </div>}\n        </>\n\n    )\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}