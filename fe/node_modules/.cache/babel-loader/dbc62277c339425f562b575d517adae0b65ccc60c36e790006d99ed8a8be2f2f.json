{"ast":null,"code":"import\"./UploadFileModal.scss\";import FileItem from\"../file_item/FileItem\";import TextButtonIcon from\"../icon_text_button/TextButtonIcon\";import{useRef,useState}from\"react\";import{v4 as uuidv4}from\"uuid\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function UploadFileModal(_ref){let{toggleShow,confirm}=_ref;const[files,setFiles]=useState([]);const fileInputRef=useRef(null);const[isProcess,setIsProcess]=useState(false);const handleChooseFile=()=>{fileInputRef.current.click();};const uploadDocument=e=>{const files=e.target.files;setFiles(prevFiles=>[...prevFiles,...files]);};const handleFileRemove=indexToRemove=>{setFiles(files.filter((_,index)=>index!==indexToRemove));};const handleConfirm=async()=>{setIsProcess(true);await confirm(files);setIsProcess(false);};// useEffect(() => {\n//     if (isProcess) {\n//         const processFiles = async () => {\n//             await confirm(files);\n//             setIsProcess(false); // Turn off loading state after processing is done\n//         };\n//         processFiles();\n//     }\n// }, [isProcess, confirm, files]);\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"new_bot__modal \",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"title_form\",children:\"Th\\xEAm t\\xE0i li\\u1EC7u\"}),/*#__PURE__*/_jsx(\"form\",{className:\"new_bot__modal-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"T\\u1EA3i l\\xEAn\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input__wrapper\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input_file\",onChange:uploadDocument,type:\"file\",ref:fileInputRef,multiple:true}),/*#__PURE__*/_jsxs(\"div\",{onClick:handleChooseFile,className:\"upload\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-cloud-arrow-up-fill\"}),/*#__PURE__*/_jsx(\"span\",{className:\"input-title\",children:\"B\\u1EA5m \\u0111\\u1EC3 t\\u1EA3i l\\xEAn\"}),/*#__PURE__*/_jsx(\"span\",{className:\"input-sub\",children:\"T\\u1EA3i l\\xEAn file c\\xF3 d\\u1EA1ng TXT, DOC, PDF\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"files_container\",children:files.map((file,index)=>/*#__PURE__*/_jsx(FileItem,{fileName:file.name,deleteFile:()=>handleFileRemove(index)},uuidv4()))})]})}),isProcess&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"process_data\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loader_item\"}),/*#__PURE__*/_jsx(\"div\",{className:\"loader_item\"}),/*#__PURE__*/_jsx(\"div\",{className:\"loader_item\"}),/*#__PURE__*/_jsx(\"div\",{className:\"loader_item\"}),/*#__PURE__*/_jsx(\"div\",{className:\"loader_item\"}),/*#__PURE__*/_jsx(\"div\",{className:\"loader_item\"}),/*#__PURE__*/_jsx(\"div\",{className:\"loader_item\"}),/*#__PURE__*/_jsx(\"div\",{className:\"loader_item\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"loading_label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"loading_label\",children:\"\\u0110ang x\\u1EED l\\xFD d\\u1EEF li\\u1EC7u...\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"new_bot__modal-footer\",children:[/*#__PURE__*/_jsx(TextButtonIcon,{title:\"Hủy\",onPress:toggleShow,background:\"#FFFFFF\",color:\"#1C1C1C\"}),/*#__PURE__*/_jsx(TextButtonIcon,{title:\"Xác nhận\",onPress:handleConfirm})]})]})});}","map":{"version":3,"names":["FileItem","TextButtonIcon","useRef","useState","v4","uuidv4","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UploadFileModal","_ref","toggleShow","confirm","files","setFiles","fileInputRef","isProcess","setIsProcess","handleChooseFile","current","click","uploadDocument","e","target","prevFiles","handleFileRemove","indexToRemove","filter","_","index","handleConfirm","className","children","onChange","type","ref","multiple","onClick","map","file","fileName","name","deleteFile","title","onPress","background","color"],"sources":["/Users/huudan/Development/chatbot.com/fe/src/components/upload_file_modal/UploadFileModal.js"],"sourcesContent":["import \"./UploadFileModal.scss\"\nimport FileItem from \"../file_item/FileItem\";\n\nimport TextButtonIcon from \"../icon_text_button/TextButtonIcon\";\nimport {useRef, useState} from \"react\";\nimport {v4 as uuidv4} from \"uuid\";\n\nexport default function UploadFileModal({toggleShow, confirm}) {\n    const [files, setFiles] = useState([]);\n    const fileInputRef = useRef(null);\n    const [isProcess, setIsProcess] = useState(false);\n    const handleChooseFile = () => {\n        fileInputRef.current.click();\n    };\n    const uploadDocument = (e) => {\n        const files = e.target.files;\n        setFiles(prevFiles => [...prevFiles, ...files]);\n    }\n    const handleFileRemove = (indexToRemove) => {\n        setFiles(files.filter((_, index) => index !== indexToRemove));\n    };\n    const handleConfirm = async () => {\n        setIsProcess(true);\n        await confirm(files);\n        setIsProcess(false);\n    }\n    // useEffect(() => {\n    //     if (isProcess) {\n    //         const processFiles = async () => {\n    //             await confirm(files);\n    //             setIsProcess(false); // Turn off loading state after processing is done\n    //         };\n    //         processFiles();\n    //     }\n    // }, [isProcess, confirm, files]);\n    return (\n        <div className=\"overlay\">\n            <div className=\"new_bot__modal \">\n                <h2 className=\"title_form\">Thêm tài liệu</h2>\n                <form className={\"new_bot__modal-body\"}>\n                     <div className={\"form-field\"}>\n                        <label className={\"label\"}>Tải lên</label>\n                        <div className=\"input__wrapper\">\n                            <input className={\"input_file\"} onChange={uploadDocument} type={\"file\"} ref={fileInputRef} multiple/>\n                            <div onClick={handleChooseFile} className=\"upload\">\n                                <i className=\"bi bi-cloud-arrow-up-fill\"></i>\n                                <span className=\"input-title\">Bấm để tải lên</span>\n                                <span className=\"input-sub\">Tải lên file có dạng TXT, DOC, PDF</span>\n                            </div>\n                        </div>\n                        <div className=\"files_container\">\n                            {files.map((file, index)=><FileItem key={uuidv4()} fileName={file.name} deleteFile={()=>handleFileRemove(index)}/>)}\n                        </div>\n                    </div>\n                </form>\n                {isProcess && <>\n                    <div className={\"process_data\"}>\n                        <div className=\"loader_item\"></div>\n                        <div className=\"loader_item\"></div>\n                        <div className=\"loader_item\"></div>\n                        <div className=\"loader_item\"></div>\n                        <div className=\"loader_item\"></div>\n                        <div className=\"loader_item\"></div>\n                        <div className=\"loader_item\"></div>\n                        <div className=\"loader_item\"></div>\n                    </div>\n                    <div className={\"loading_label\"}>\n                        <span className={\"loading_label\"}>Đang xử lý dữ liệu...</span>\n                    </div>\n                </>}\n                <div className=\"new_bot__modal-footer\">\n                    <TextButtonIcon title={\"Hủy\"} onPress={toggleShow} background={\"#FFFFFF\"} color={\"#1C1C1C\"}/>\n                    {/*<TextButtonIcon title={\"Confirm\"} onPress={()=>confirm(files)}/>*/}\n                    <TextButtonIcon title={\"Xác nhận\"} onPress={handleConfirm}/>\n                </div>\n            </div>\n        </div>\n    )\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}