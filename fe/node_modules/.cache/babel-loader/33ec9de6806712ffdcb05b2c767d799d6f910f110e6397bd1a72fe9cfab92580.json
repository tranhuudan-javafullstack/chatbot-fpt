{"ast":null,"code":"import SideBar from\"../../components/draw_bar/SideBar\";import\"./HomePage.scss\";import{Outlet,useNavigate}from\"react-router-dom\";import{useDispatch}from\"react-redux\";import{useEffect,useState}from\"react\";import{getUserInfo,verifyToken}from\"../../services/UserService\";import{saveUserInfo}from\"../../store/actions/UserAction\";import Loading from\"../../components/loading/Loading\";import{decryptToken}from\"../../utils/Functions\";import{Routers}from\"../../utils/Constants\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export default function HomePage(props){var _localStorage$getItem;const accessToken=decryptToken((_localStorage$getItem=localStorage.getItem('access_token'))!==null&&_localStorage$getItem!==void 0?_localStorage$getItem:\"\");const[isLoading,setIsLoading]=useState(true);const dispatch=useDispatch();const navigate=useNavigate();useEffect(()=>{handleVerifyToken();fetchData();},[accessToken,navigate]);const fetchData=async()=>{try{const userInfo=await getUserInfo(accessToken);dispatch(saveUserInfo(userInfo));setIsLoading(false);}catch(error){console.error('Error fetching user info:',error);}};const handleVerifyToken=async()=>{try{const verify=await verifyToken(accessToken);}catch(error){// console.error('Error fetching user info:', error);\nnavigate(Routers.Login);}};return/*#__PURE__*/_jsx(\"div\",{className:\"chat\",children:isLoading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(SideBar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"safe_area\",children:/*#__PURE__*/_jsx(Outlet,{})})]})});}","map":{"version":3,"names":["SideBar","Outlet","useNavigate","useDispatch","useEffect","useState","getUserInfo","verifyToken","saveUserInfo","Loading","decryptToken","Routers","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","HomePage","props","_localStorage$getItem","accessToken","localStorage","getItem","isLoading","setIsLoading","dispatch","navigate","handleVerifyToken","fetchData","userInfo","error","console","verify","Login","className","children"],"sources":["/Users/huudan/Development/chatbot.com/fe/src/page/home/HomePage.js"],"sourcesContent":["import SideBar from \"../../components/draw_bar/SideBar\";\nimport \"./HomePage.scss\"\nimport {Outlet, useNavigate} from \"react-router-dom\";\nimport {useDispatch} from \"react-redux\";\nimport {useEffect, useState} from \"react\";\nimport {getUserInfo, verifyToken} from \"../../services/UserService\";\nimport {saveUserInfo} from \"../../store/actions/UserAction\";\nimport Loading from \"../../components/loading/Loading\";\nimport {decryptToken} from \"../../utils/Functions\";\nimport {Routers} from \"../../utils/Constants\";\n\nexport default function HomePage(props) {\n    const accessToken = decryptToken(localStorage.getItem('access_token') ?? \"\");\n    const [isLoading, setIsLoading] = useState(true);\n    const dispatch = useDispatch();\n    const navigate = useNavigate();\n    useEffect(() => {\n        handleVerifyToken();\n        fetchData();\n    }, [accessToken, navigate]);\n    const fetchData = async () => {\n        try {\n            const userInfo = await getUserInfo(accessToken);\n            dispatch(saveUserInfo(userInfo));\n            setIsLoading(false);\n        } catch (error) {\n            console.error('Error fetching user info:', error);\n        }\n    };\n    const handleVerifyToken = async () =>{\n        try {\n            const verify = await verifyToken(accessToken);\n        } catch (error) {\n            // console.error('Error fetching user info:', error);\n            navigate(Routers.Login);\n        }\n    }\n    return(<div className={\"chat\"}>\n        {isLoading ? <Loading/>: <>\n            <SideBar/>\n            <div className={\"safe_area\"}>\n                {/*<HomeWelcome/>*/}\n                <Outlet/>\n            </div>\n        </>}\n    </div>)\n}"],"mappings":"AAAA,MAAO,CAAAA,OAAO,KAAM,mCAAmC,CACvD,MAAO,iBAAiB,CACxB,OAAQC,MAAM,CAAEC,WAAW,KAAO,kBAAkB,CACpD,OAAQC,WAAW,KAAO,aAAa,CACvC,OAAQC,SAAS,CAAEC,QAAQ,KAAO,OAAO,CACzC,OAAQC,WAAW,CAAEC,WAAW,KAAO,4BAA4B,CACnE,OAAQC,YAAY,KAAO,gCAAgC,CAC3D,MAAO,CAAAC,OAAO,KAAM,kCAAkC,CACtD,OAAQC,YAAY,KAAO,uBAAuB,CAClD,OAAQC,OAAO,KAAO,uBAAuB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE9C,cAAe,SAAS,CAAAC,QAAQA,CAACC,KAAK,CAAE,KAAAC,qBAAA,CACpC,KAAM,CAAAC,WAAW,CAAGX,YAAY,EAAAU,qBAAA,CAACE,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,UAAAH,qBAAA,UAAAA,qBAAA,CAAI,EAAE,CAAC,CAC5E,KAAM,CAACI,SAAS,CAAEC,YAAY,CAAC,CAAGpB,QAAQ,CAAC,IAAI,CAAC,CAChD,KAAM,CAAAqB,QAAQ,CAAGvB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAwB,QAAQ,CAAGzB,WAAW,CAAC,CAAC,CAC9BE,SAAS,CAAC,IAAM,CACZwB,iBAAiB,CAAC,CAAC,CACnBC,SAAS,CAAC,CAAC,CACf,CAAC,CAAE,CAACR,WAAW,CAAEM,QAAQ,CAAC,CAAC,CAC3B,KAAM,CAAAE,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC1B,GAAI,CACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAxB,WAAW,CAACe,WAAW,CAAC,CAC/CK,QAAQ,CAAClB,YAAY,CAACsB,QAAQ,CAAC,CAAC,CAChCL,YAAY,CAAC,KAAK,CAAC,CACvB,CAAE,MAAOM,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,2BAA2B,CAAEA,KAAK,CAAC,CACrD,CACJ,CAAC,CACD,KAAM,CAAAH,iBAAiB,CAAG,KAAAA,CAAA,GAAW,CACjC,GAAI,CACA,KAAM,CAAAK,MAAM,CAAG,KAAM,CAAA1B,WAAW,CAACc,WAAW,CAAC,CACjD,CAAE,MAAOU,KAAK,CAAE,CACZ;AACAJ,QAAQ,CAAChB,OAAO,CAACuB,KAAK,CAAC,CAC3B,CACJ,CAAC,CACD,mBAAOrB,IAAA,QAAKsB,SAAS,CAAE,MAAO,CAAAC,QAAA,CACzBZ,SAAS,cAAGX,IAAA,CAACJ,OAAO,GAAC,CAAC,cAAEQ,KAAA,CAAAF,SAAA,EAAAqB,QAAA,eACrBvB,IAAA,CAACb,OAAO,GAAC,CAAC,cACVa,IAAA,QAAKsB,SAAS,CAAE,WAAY,CAAAC,QAAA,cAExBvB,IAAA,CAACZ,MAAM,GAAC,CAAC,CACR,CAAC,EACR,CAAC,CACF,CAAC,CACV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}