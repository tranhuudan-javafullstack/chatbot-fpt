{"ast":null,"code":"import\"./Knowledge.scss\";import knowledgeImage from\"../../assets/images/knowledge.png\";import KnowledgeItem from\"../knowledge_item/KnowledgeItem\";import{useEffect,useState}from\"react\";import NotificationDialog from\"../notification_dialog/NotificationDialog\";import KnowledgeModal from\"../knowledge_modal/KnowledgeModal\";import{decryptToken}from\"../../utils/Functions\";import{useDispatch,useSelector}from\"react-redux\";import Loading from\"../loading/Loading\";import{createKnowledge,deleteKnowledge,getKnowledges,updateKnowledge}from\"../../services/KnowledgeService\";import{actionDeleteKnowledge,actionUpdateKnowledge,addKnowledge,saveKnowledges}from\"../../store/actions/KnowledgeAction\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Knowledge(){const[showDialog,setShowDialog]=useState(false);const[showCreateKnowledge,setShowCreateKnowLedge]=useState(false);const[titleKnowledge,setTitleKnowledge]=useState(\"\");const[descriptionKnowledge,setDescriptionKnowledge]=useState(\"\");const[knowledgeIdEdit,setKnowledgeIdEdit]=useState(\"\");const accessToken=decryptToken(localStorage.getItem('access_token'));const dispatch=useDispatch();const[isLoading,setIsLoading]=useState(true);const knowledges=useSelector(state=>state.knowledgeReducer.knowledges);useEffect(()=>{fetchData();},[accessToken]);const fetchData=async()=>{try{const data=await getKnowledges(accessToken);dispatch(saveKnowledges(data.knowledges));setIsLoading(false);}catch(error){console.error('Error fetching knowledges:',error.message);}};const toggleShowDialog=function(){let knowledgeId=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"\";setKnowledgeIdEdit(knowledgeId);setShowDialog(!showDialog);};const toggleEditKnowledge=function(){let titleKnowledge=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"\";let descriptionKnowledge=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"\";let knowledgeId=arguments.length>2&&arguments[2]!==undefined?arguments[2]:\"\";setTitleKnowledge(titleKnowledge);setDescriptionKnowledge(descriptionKnowledge);setKnowledgeIdEdit(knowledgeId);setShowCreateKnowLedge(!showCreateKnowledge);};const confirm=async(titleKnowledge,descriptionKnowledge,knowledgeId)=>{try{if(knowledgeId){const data=await updateKnowledge(knowledgeId,titleKnowledge,descriptionKnowledge,accessToken);dispatch(actionUpdateKnowledge(data));}else{const data=await createKnowledge(titleKnowledge,descriptionKnowledge,accessToken);dispatch(addKnowledge(data));}toggleEditKnowledge();}catch(error){console.error('Error confirm knowledge:',error.message);}};const handleDeleteKnowledge=async knowledgeId=>{try{const data=await deleteKnowledge(knowledgeId,accessToken);dispatch(actionDeleteKnowledge(knowledgeId));toggleShowDialog();}catch(error){console.error('Error create bot:',error.message);}};return/*#__PURE__*/_jsx(_Fragment,{children:isLoading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsxs(\"div\",{className:\"bot_page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bot_page__header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bot_page__title\",children:[/*#__PURE__*/_jsx(\"img\",{src:knowledgeImage,alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{className:\"title\",children:\"Ki\\u1EBFn th\\u1EE9c\"})]}),/*#__PURE__*/_jsx(\"div\",{onClick:()=>toggleEditKnowledge(),className:\"bot_page__btn\",children:/*#__PURE__*/_jsx(\"div\",{className:\"btn_create_bot\",children:/*#__PURE__*/_jsx(\"p\",{className:\"btn_create_bot--text\",children:\"T\\u1EA1o ki\\u1EBFn th\\u1EE9c\"})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bot_page__body\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table_wrapper\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"thead--border\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Ki\\u1EBFn th\\u1EE9c\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Ki\\u1EC3u\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Th\\u1EDDi gian t\\u1EA1o\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Thao t\\xE1c\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:knowledges.map((knowledge,index)=>{return/*#__PURE__*/_jsx(KnowledgeItem,{createdAt:knowledge.created_at,knowledgeId:knowledge.knowledge_id,title:knowledge.name,description:knowledge.description,type:\"Text\",size:\"1.9 MB\",toggleShowEdit:toggleEditKnowledge,toggleShowDialog:toggleShowDialog},knowledge.knowledge_id);})})]})}),showDialog&&/*#__PURE__*/_jsx(NotificationDialog,{confirm:()=>handleDeleteKnowledge(knowledgeIdEdit),title:\"Xác nhận để xóa\",mesage:\"Bạn chắc chắn muốn xóa kiến thức này?\",cancelDialog:toggleShowDialog}),showCreateKnowledge&&/*#__PURE__*/_jsx(KnowledgeModal,{confirm:confirm,knowledgeId:knowledgeIdEdit,title:titleKnowledge,description:descriptionKnowledge,titleForm:\"Create knowledge\",toggleShow:toggleEditKnowledge})]})});}","map":{"version":3,"names":["knowledgeImage","KnowledgeItem","useEffect","useState","NotificationDialog","KnowledgeModal","decryptToken","useDispatch","useSelector","Loading","createKnowledge","deleteKnowledge","getKnowledges","updateKnowledge","actionDeleteKnowledge","actionUpdateKnowledge","addKnowledge","saveKnowledges","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Knowledge","showDialog","setShowDialog","showCreateKnowledge","setShowCreateKnowLedge","titleKnowledge","setTitleKnowledge","descriptionKnowledge","setDescriptionKnowledge","knowledgeIdEdit","setKnowledgeIdEdit","accessToken","localStorage","getItem","dispatch","isLoading","setIsLoading","knowledges","state","knowledgeReducer","fetchData","data","error","console","message","toggleShowDialog","knowledgeId","arguments","length","undefined","toggleEditKnowledge","confirm","handleDeleteKnowledge","children","className","src","alt","onClick","map","knowledge","index","createdAt","created_at","knowledge_id","title","name","description","type","size","toggleShowEdit","mesage","cancelDialog","titleForm","toggleShow"],"sources":["/Users/huudan/Development/chatbot.com/fe/src/components/knowledge/Knowledge.js"],"sourcesContent":["import \"./Knowledge.scss\"\nimport knowledgeImage from \"../../assets/images/knowledge.png\";\nimport KnowledgeItem from \"../knowledge_item/KnowledgeItem\";\nimport {useEffect, useState} from \"react\";\nimport NotificationDialog from \"../notification_dialog/NotificationDialog\";\nimport KnowledgeModal from \"../knowledge_modal/KnowledgeModal\";\nimport {decryptToken} from \"../../utils/Functions\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport Loading from \"../loading/Loading\";\nimport {createKnowledge, deleteKnowledge, getKnowledges, updateKnowledge} from \"../../services/KnowledgeService\";\nimport {\n    actionDeleteKnowledge,\n    actionUpdateKnowledge,\n    addKnowledge,\n    saveKnowledges\n} from \"../../store/actions/KnowledgeAction\";\n\nexport default function Knowledge() {\n    const [showDialog, setShowDialog] = useState(false);\n    const [showCreateKnowledge, setShowCreateKnowLedge] = useState(false);\n    const [titleKnowledge, setTitleKnowledge] = useState(\"\");\n    const [descriptionKnowledge, setDescriptionKnowledge] = useState(\"\");\n    const [knowledgeIdEdit, setKnowledgeIdEdit] = useState(\"\");\n    const accessToken = decryptToken(localStorage.getItem('access_token'));\n    const dispatch = useDispatch();\n    const [isLoading, setIsLoading] = useState(true);\n    const knowledges = useSelector((state) => state.knowledgeReducer.knowledges);\n    useEffect(() => {\n        fetchData();\n    }, [accessToken]);\n    const fetchData = async () => {\n        try {\n            const data = await getKnowledges(accessToken);\n            dispatch(saveKnowledges(data.knowledges));\n            setIsLoading(false);\n        } catch (error) {\n            console.error('Error fetching knowledges:', error.message);\n        }\n    };\n    const toggleShowDialog = (knowledgeId = \"\") => {\n        setKnowledgeIdEdit(knowledgeId);\n        setShowDialog(!showDialog);\n    }\n    const toggleEditKnowledge = (titleKnowledge=\"\", descriptionKnowledge=\"\", knowledgeId = \"\") => {\n        setTitleKnowledge(titleKnowledge);\n        setDescriptionKnowledge(descriptionKnowledge);\n        setKnowledgeIdEdit(knowledgeId);\n        setShowCreateKnowLedge(!showCreateKnowledge);\n    }\n    const confirm = async (titleKnowledge, descriptionKnowledge, knowledgeId) => {\n        try {\n            if(knowledgeId){\n                const data = await updateKnowledge(knowledgeId,titleKnowledge, descriptionKnowledge, accessToken);\n                dispatch(actionUpdateKnowledge(data));\n            }else{\n                const data = await createKnowledge(titleKnowledge, descriptionKnowledge,accessToken);\n                dispatch(addKnowledge(data));\n            }\n            toggleEditKnowledge();\n        } catch (error) {\n            console.error('Error confirm knowledge:', error.message);\n        }\n    }\n    const handleDeleteKnowledge = async (knowledgeId) => {\n        try {\n            const data = await deleteKnowledge(knowledgeId, accessToken);\n            dispatch(actionDeleteKnowledge(knowledgeId));\n            toggleShowDialog();\n        } catch (error) {\n            console.error('Error create bot:', error.message);\n        }\n    }\n    return (\n        <>\n            {isLoading ? <Loading/> : <div className={\"bot_page\"}>\n                <div className=\"bot_page__header\">\n                    <div className=\"bot_page__title\">\n                        <img src={knowledgeImage} alt=\"\"/><p className={\"title\"}>Kiến thức</p>\n                    </div>\n                    <div onClick={()=>toggleEditKnowledge()} className=\"bot_page__btn\">\n                        <div className={\"btn_create_bot\"}>\n                            <p className={\"btn_create_bot--text\"}>Tạo kiến thức</p>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"bot_page__body\">\n                    <table className={\"table_wrapper\"}>\n                        <thead className={\"thead--border\"}>\n                        <tr>\n                            <th>Kiến thức</th>\n                            <th>Kiểu</th>\n                            {/*<th>Kích thước</th>*/}\n                            <th>Thời gian tạo</th>\n                            {/*<th>Enable</th>*/}\n                            <th>Thao tác</th>\n                        </tr>\n                        </thead>\n                        <tbody>\n                        {knowledges.map((knowledge, index)=>{\n                            return <KnowledgeItem createdAt={knowledge.created_at} key={knowledge.knowledge_id} knowledgeId={knowledge.knowledge_id} title={knowledge.name} description={knowledge.description} type={\"Text\"} size={\"1.9 MB\"} toggleShowEdit={toggleEditKnowledge} toggleShowDialog={toggleShowDialog}/>\n                        })}\n                        </tbody>\n                    </table>\n                </div>\n                {showDialog && <NotificationDialog confirm={()=> handleDeleteKnowledge(knowledgeIdEdit)} title={\"Xác nhận để xóa\"} mesage={\"Bạn chắc chắn muốn xóa kiến thức này?\"}\n                                                   cancelDialog={toggleShowDialog}/>}\n                {showCreateKnowledge && <KnowledgeModal confirm={confirm} knowledgeId={knowledgeIdEdit} title={titleKnowledge} description={descriptionKnowledge} titleForm={\"Create knowledge\"} toggleShow={toggleEditKnowledge}/>}\n            </div>}\n        </>\n\n    )\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}